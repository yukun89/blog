

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>You can find the content here:</title>
  <meta name="author" content="">
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" rel="stylesheet" type="text/css">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/solarized_light.css"  rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>

  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  html{ background: none;}
  html,body,body>div{ height: 100%; background-color: #f8f8f8;}
	body>div>div{ border: none;}
	@media print {
		#content .hljs{
			overflow: visible; word-wrap: break-word;
  		}
	}
   #MathJax_Message{ height: 25px;}

  </style>
  <script type="text/javascript">
  var isAddSildbar = false;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="octopress.css">

</head>
<script type="text/javascript">
//链接新开窗口
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
 
  <div id="main">
    <div id="content"> 
<div>
	<article class="hentry" role="article">
	<header>
			  	<h1 class="entry-title">You can find the content here:</h1>
			 </header>
		  	<div class="entry-content">
		  	<p>http://[customerId].v.fwmrm.net/ad/g/1?[globalParams];[keyValues];[ParamsForSlot1];[ParamsForSlot2];...;[ParamsForSlotN];</p>

<ul>
<li>HTTP GET Ad Request

<ul>
<li>HTTP GET Ad Request Structure</li>
<li>HTTP GET Ad Request Samples</li>
<li>Parameters in HTTP GET Ad Request</li>
</ul></li>
<li>SMART XML Response

<ul>
<li>Slot</li>
<li>SMART XML Structure</li>
<li>Ad References in a Slot</li>
<li>Play a Slot</li>
<li>Play an Ad Reference

<ul>
<li>Select Creative Renditions for Ad Reference</li>
<li>Extract and Send Callback URLs

<ul>
<li>Tracking URLs</li>
<li>Ad Callback URLs Example</li>
</ul></li>
</ul></li>
<li>Survey URLs</li>
<li>Play Companion Ads</li>
<li>Content Video View

<ul>
<li>Count Video Views by Ad Requests</li>
<li>Record Video Views by Sending Callback URLs

<ul>
<li>Send Video View URL on Video Start</li>
<li>Send Video View URL During Video Play</li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<h1 id="toc_0">HTTP get ad requst</h1>

<h2 id="toc_1">http get ad request structure</h2>

<blockquote>
<p>http://[customerId].v.fwmrm.net/ad/g/1?[globalParams];[keyValues];[ParamsForSlot1];[ParamsForSlot2];...;[ParamsForSlotN];</p>
</blockquote>

<pre><code>/ad/g/1?[globalParams];[keyValueParams];[slotParams];[slotParams];[slotParams]...

                         globalParameters := gp=value&amp;gp=value

                         keyValueParameters := kp=value&amp;kp=value

                        slotParams := sp=value&amp;sp=value]
</code></pre>

<h2 id="toc_2">HTTP GET Ad Request Samples</h2>

<p>An ad request with three slots: preroll, overlay and a display:</p>

<blockquote>
<p><a href="http://demo.v.fwmrm.net/ad/g/1?flag=+emcr+slcb&amp;nw=96749&amp;prof=global-as3&amp;csid=DemoSiteGroup.01&amp;caid=DemoVideoGroup.01&amp;vdur=3000&amp;resp=xml;module=DemoPlayer&amp;feature=simpleAds;slid=pre&amp;tpos=0&amp;ptgt=a&amp;slau=preroll;slid=overlay&amp;tpos=10&amp;ptgt=a&amp;slau=overlay;slid=display&amp;ptgt=s&amp;slau=display&amp;w=728&amp;h=90&amp;flag=+cmpn">http://demo.v.fwmrm.net/ad/g/1?flag=+emcr+slcb&amp;nw=96749&amp;prof=global-as3&amp;csid=DemoSiteGroup.01&amp;caid=DemoVideoGroup.01&amp;vdur=3000&amp;resp=xml;module=DemoPlayer&amp;feature=simpleAds;slid=pre&amp;tpos=0&amp;ptgt=a&amp;slau=preroll;slid=overlay&amp;tpos=10&amp;ptgt=a&amp;slau=overlay;slid=display&amp;ptgt=s&amp;slau=display&amp;w=728&amp;h=90&amp;flag=+cmpn</a>;</p>
</blockquote>

<p>An ad request with three slots with slots generated by FreeWheel MRM Commercial Break Pattern, you can see no slot parameters in the URL:</p>

<blockquote>
<p><a href="http://demo.v.fwmrm.net/ad/g/1?flag=+emcr+slcb+sltp&amp;nw=96749&amp;prof=global-as3&amp;csid=CBPTestSite.02&amp;caid=DemoVideoGroup.01&amp;vdur=3000&amp;resp=xml;module=DemoPlayer&amp;feature=simpleAds">http://demo.v.fwmrm.net/ad/g/1?flag=+emcr+slcb+sltp&amp;nw=96749&amp;prof=global-as3&amp;csid=CBPTestSite.02&amp;caid=DemoVideoGroup.01&amp;vdur=3000&amp;resp=xml;module=DemoPlayer&amp;feature=simpleAds</a>;</p>
</blockquote>

<h2 id="toc_3">Parameters in HTTP GET Ad Request</h2>

<p>You can find more parameters here:<a href="http://wiki.dev.fwmrm.net/display/publicdrafts/HTTP+GET+Ad+Request+and+SmartXML+Response#HTTPGETAdRequestandSmartXMLResponse-HTTPGETAdRequestStructure">http://wiki.dev.fwmrm.net/display/publicdrafts/HTTP+GET+Ad+Request+and+SmartXML+Response#HTTPGETAdRequestandSmartXMLResponse-HTTPGETAdRequestStructure</a></p>

<ol>
<li>Global Parameters:</li>
</ol>

<p>Name    Required    Desription<br/>
nw      Y           network id<br/>
resp    Y           response type<br/>
prof    Y           player profile: this is pre_configured by freewheel<br/>
...</p>

<ol>
<li>Slot parameters:</li>
</ol>

<p>Name    Required    Desription<br/>
slid                    slot id<br/>
tpcl                Slot Time Position Class.<br/>
ptgt                type of slot<br/>
...</p>

<ol>
<li>Reserved Keys in the <q>keyValues</q> section</li>
</ol>

<p>Key                 Required    Description<br/>
<u>fw</u>h<u>user</u>agent</p>

<h1 id="toc_4">SMART XML Response</h1>

<p>workflow of display the XML response</p>

<h2 id="toc_5">slot</h2>

<p>So slots can be categorized as below:</p>

<p>Temporal Slots<br/>
    Preroll<br/>
    Midroll<br/>
    Postroll<br/>
    Overlay<br/>
Non-Temporal Slots (Display Slots)</p>

<h2 id="toc_6">SMART XML Structure</h2>

<p>SMART XML has 2 main parts:</p>

<p>A list of ads. The /adReponse/ads/ad nodes in XML.<br/>
A list of slots. The <temporalSlot> and <adSlot> nodes are for slots. In each slot node there are a list of <adReference> nodes which refer back to ad nodes. In this way, one slot can contain zero to multiple ads. </p>

<p><em>temporal slots</em></p>

<p>XPath: /adResponse/siteSection/videoPlayer/videoAsset/adSlots/temporalAdSlot</p>

<p>Available attributes in node <temporalAdSlot>:...</p>

<p><em>Non-Temporal Slots</em></p>

<p>Nodes corresponding to non-temporal ad slots are in <videoAsset> and <siteSection> nodes. </p>

<p>XPath:</p>

<p>/adResponse/siteSection/videoPlayer/adSlots/adSlot<br/>
/adResponse/siteSection/adSlots/adSlot</p>

<h2 id="toc_7">Ad References in a Slot</h2>

<h2 id="toc_8">Play a slot</h2>

<p>includes:</p>

<ul>
<li>Firing slot impression callbacks (only for temporal slots for now) first no matter this slot includes ads or not, if slot impression callbacks are included in the response.</li>
<li>Playing the ad references in a slot one by one.</li>
</ul>

<h2 id="toc_9">Play an ad reference</h2>

<p>Playing an ad reference includes:</p>

<ul>
<li> Selecting a proper creative rendition and displaying it.</li>
<li>Handling ad click.</li>
<li>Firing ad event callbacks.</li>
</ul>

<h3 id="toc_10">Select Creative Renditions for Ad Reference</h3>

<p>The valid creative renditions for the ad reference could be found via following steps:...</p>

<p>Then the player can select one proper creative rendition from all valid ones to play:...</p>

<h3 id="toc_11">Extract and Send Callback URLs</h3>

<h4 id="toc_12">tracking URLs</h4>

<p>The tracking URLs can be extracted from adReference/eventCallbacks/eventCallback/trackingURLs/url/@value.</p>

<h4 id="toc_13">Ad Callback URLs Example</h4>

<h2 id="toc_14">Survey URLs</h2>

<h2 id="toc_15">Play Companion Ads</h2>

<p>the companion ads should be played only when the driving ad (related temporal ad) has started successfully. </p>

<h2 id="toc_16">Content Video View</h2>

<p>There are three ways to record video views</p>

<ul>
<li>Count video views by ad requests</li>
<li>Record video view times and duration by sending callback URLs

<ul>
<li>Firing video view callback one time when the content video is started.</li>
<li>Firing video view callbacks continuously throughout video playback.</li>
</ul></li>
</ul>

<h3 id="toc_17">Count Video Views by Ad Requests</h3>

<h3 id="toc_18">Record Video Views by Sending Callback URLs</h3>

<p>XPath:/adResponse/siteSection/videoPlayer/videoAsset</p>

<h4 id="toc_19">Send Video View URL on Video Start</h4>

<h4 id="toc_20">Send Video View URL During Video Play</h4>

		  	</div>

		
	  
	</article>
</div>
 </div></div>

</body>
</html>